# Zookeeper

## 介绍

完成分布式的协调是一件很难的事情。在Redis击穿和穿透的时候都需要分布式锁。Redis数据没有了的时候，很多并发这时候到达了，尽量的不把并发的请求透穿到数据库里去。这样就需要在数据库前面卡一下：第一个过来的人抢一把锁，后面的没抢到锁
所以就在那里阻塞着（有点像自旋锁），第一个人抢到锁之后就去后面的数据库拿到数据，并放入缓存，其他人等时间到了之后再去Redis把数据取走。所以即便是数据有穿透，这么大的并发也不是一下子全压过去，而只是压过去了一笔。但是这个事做起来
太麻烦了，这一点在Redis里面讲过。zookeeper现在要做的就是这个分布式协调, 而且zookeeper的数据也是保存在内存中的，也能类比Redis.Zookeeper也一般是一个集群，一谈到集群就是主从复制集群或者无主集群，要么就是镜像拷贝的，要么
就是sharding分片的集群。zk属于主从复制集群，zk好多进程分布在不同的节点，每个节点的数据都一样的，server中个leader，类比主从复制的Redis集群，zk也是主节点可以增删改查，从节点只能读。当我们一看到主从集群的时候，条件反射地就
应该反应出 ----- 单点问题